# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ "–ù–µ–π—Ä–æ–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞"

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ù–µ–π—Ä–æ–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞** ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–∞—Ö–æ–¥–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö —á–µ—Ä–µ–∑ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫. –°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ RAG (Retrieval-Augmented Generation) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö FAISS.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (PDF, DOCX, TXT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- üîç –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- üéØ –ú—É–ª—å—Ç–∏–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–∫–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–Ω–¥–µ–∫—Å)
- üåê REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- üìä –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ faiss_vs/                     # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å RAG —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data/                 # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loaders.py        # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chunkers.py       # –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ image_processor.py # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vectorstore/          # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ faiss_manager.py  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–æ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document_processor.py # –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ routes.py                 # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ faiss_loader.py           # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∏–∑ 1–° API
‚îÇ   ‚îî‚îÄ‚îÄ webViewer.py              # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
‚îú‚îÄ‚îÄ lk_assistant/                 # –ú–æ–¥—É–ª—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ main.py                   # –õ–æ–≥–∏–∫–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ routes.py                 # API –º–∞—Ä—à—Ä—É—Ç—ã –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îî‚îÄ‚îÄ main.py                       # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞–ø–∫–∏:
```
faiss_vs/data/
‚îú‚îÄ‚îÄ documents/           # –°–∫–∞—á–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–ø–æ client_id)
‚îú‚îÄ‚îÄ processed/           # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ faiss_index/         # FAISS –∏–Ω–¥–µ–∫—Å—ã
    ‚îî‚îÄ‚îÄ clients/         # –ü–∞–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
        ‚îî‚îÄ‚îÄ {client_id}/ # –î–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
            ‚îú‚îÄ‚îÄ index.faiss      # FAISS –∏–Ω–¥–µ–∫—Å
            ‚îú‚îÄ‚îÄ metadata.pkl     # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–æ–≤
            ‚îú‚îÄ‚îÄ mappings.json    # –ú–∞–ø–ø–∏–Ω–≥–∏ ID
            ‚îú‚îÄ‚îÄ config.json      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
            ‚îî‚îÄ‚îÄ data.json        # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### 3. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ API
python main.py

# –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
python faiss_vs/webViewer.py
```

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. DocumentProcessor - –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `faiss_vs/src/document_processor.py`

–≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
processor = DocumentProcessor(client_id="your_client_id")

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ JSON —Ñ–∞–π–ª–∞
stats = processor.process_documents_from_json("documents.json")

# –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
results = processor.search_documents("–≤–∞—à –∑–∞–ø—Ä–æ—Å", k=5)
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `process_documents_from_json()` - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ JSON
- `search_documents()` - –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∏–Ω–¥–µ–∫—Å—É
- `get_index_statistics()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–Ω–¥–µ–∫—Å–∞
- `remove_document()` - —É–¥–∞–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ –∏–Ω–¥–µ–∫—Å–∞

### 2. FAISSManager - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–æ–π

**–§–∞–π–ª:** `faiss_vs/src/vectorstore/faiss_manager.py`

–£–ø—Ä–∞–≤–ª—è–µ—Ç FAISS –∏–Ω–¥–µ–∫—Å–æ–º –∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.

```python
# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
faiss_manager = FAISSManager(client_id="your_client_id")

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å
faiss_manager.add_chunks(chunks)

# –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
results = faiss_manager.search("–∑–∞–ø—Ä–æ—Å", k=5)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
faiss_manager.save_index()
```

### 3. DocumentLoader - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `faiss_vs/src/data/loaders.py`

–°–∫–∞—á–∏–≤–∞–µ—Ç –∏ –ø–∞—Ä—Å–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- PDF (PyPDF2)
- DOCX (python-docx) 
- TXT, MD (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã)
- HTML (BeautifulSoup)
- PPTX (python-pptx)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å OCR (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 4. DocumentChunker - –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã

**–§–∞–π–ª:** `faiss_vs/src/data/chunkers.py`

–†–∞–∑–±–∏–≤–∞–µ—Ç –±–æ–ª—å—à–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã (—á–∞–Ω–∫–∏).

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 1000 —Å–∏–º–≤–æ–ª–æ–≤
- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ: 200 —Å–∏–º–≤–æ–ª–æ–≤
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º

## üåê API Endpoints

### FAISS API (`/faiss/`)

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
```http
POST /faiss/create_index
Content-Type: application/json

{
    "client_id": "your_client_id"
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ 1–° API
2. –°–∫–∞—á–∏–≤–∞–µ—Ç PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã
3. –ü–∞—Ä—Å–∏—Ç –∏—Ö –∏ —Å–æ–∑–¥–∞–µ—Ç —á–∞–Ω–∫–∏
4. –°–æ–∑–¥–∞–µ—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ FAISS –∏–Ω–¥–µ–∫—Å

#### 2. –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
```http
POST /faiss/search
Content-Type: application/json

{
    "client_id": "your_client_id",
    "query": "—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞",
    "k": 5
}
```

#### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω–¥–µ–∫—Å–µ
```http
GET /faiss/get_index
Content-Type: application/json

{
    "client_id": "your_client_id"
}
```

### Assistant API (`/assistant/`)

#### –ó–∞–ø—Ä–æ—Å –∫ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É
```http
POST /assistant/ask
Content-Type: application/json

{
    "message": "–≤–∞—à –≤–æ–ø—Ä–æ—Å",
    "client_id": "your_client_id"
}
```

## üîß –£—Ç–∏–ª–∏—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### 1. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
python faiss_vs/webViewer.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000 –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫:
- –ü—Ä–æ—Å–º–æ—Ç—Ä—É –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏–Ω–¥–µ–∫—Å–∞
- –ü–æ–∏—Å–∫—É –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ñ–∞–π–ª–∞–º

### 2. –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞

```bash
python faiss_vs/quick_cleanup.py your_client_id
```

–£–¥–∞–ª—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (–¥–æ–∫—É–º–µ–Ω—Ç—ã, –∏–Ω–¥–µ–∫—Å, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ).

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

```bash
python faiss_vs/check_metadata.py your_client_id
```

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –∏–Ω–¥–µ–∫—Å–µ –∫–ª–∏–µ–Ω—Ç–∞.

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞

```bash
python faiss_vs/simple_viewer.py
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –∏–Ω–¥–µ–∫—Å–µ.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `faiss_vs/src/config.py`

–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã:

```python
class Settings:
    # –ü—É—Ç–∏
    PROJECT_ROOT: Path = Path(__file__).parent.parent
    DATA_DIR: Path = PROJECT_ROOT / "data"
    DOCUMENTS_DIR: Path = DATA_DIR / "documents"
    FAISS_INDEX_DIR: Path = DATA_DIR / "faiss_index"
    
    # Embeddings
    EMBEDDING_MODEL: str = "sentence-transformers/all-MiniLM-L6-v2"
    EMBEDDING_DIMENSION: int = 384
    
    # –ß–∞–Ω–∫–∏–Ω–≥
    CHUNK_SIZE: int = 1000
    CHUNK_OVERLAP: int = 200
    
    # FAISS
    FAISS_INDEX_TYPE: str = "FlatIP"  # Inner Product –¥–ª—è cosine similarity
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
    MAX_FILE_SIZE_MB: int = 50
    SUPPORTED_EXTENSIONS: list = [".pdf", ".docx", ".txt", ".md", ".html", ".jpg", ".jpeg", ".png"]
    
    # –°–µ—Ç—å
    REQUEST_TIMEOUT: int = 30
    MAX_RETRIES: int = 3
```

## üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Workflow)

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞

```mermaid
graph TD
    A[1–° API] --> B[–ó–∞–≥—Ä—É–∑–∫–∞ JSON]
    B --> C[–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è PDF]
    C --> D[–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤]
    D --> E[–ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤]
    E --> F[–°–æ–∑–¥–∞–Ω–∏–µ —á–∞–Ω–∫–æ–≤]
    F --> G[–°–æ–∑–¥–∞–Ω–∏–µ embeddings]
    G --> H[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ FAISS]
```

### 2. –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å] --> B[–°–æ–∑–¥–∞–Ω–∏–µ embedding –∑–∞–ø—Ä–æ—Å–∞]
    B --> C[–ü–æ–∏—Å–∫ –≤ FAISS –∏–Ω–¥–µ–∫—Å–µ]
    C --> D[–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤]
    D --> E[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö]
    E --> F[–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤]
```

## üìä –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–ö–∞–∂–¥—ã–π —á–∞–Ω–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–≥–∞—Ç—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:

```json
{
    "source_url": "https://...",
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
    "date": "2024-01-15",
    "guid_doc": "uuid-–¥–æ–∫—É–º–µ–Ω—Ç–∞",
    "parent": "–ö–∞—Ç–µ–≥–æ—Ä–∏—è",
    "object_id": "ID –æ–±—ä–µ–∫—Ç–∞",
    "category": "tech",
    "file_type": ".pdf",
    "filename": "document.pdf",
    "file_size": 1048576,
    "processing_date": "2024-01-15T10:30:00",
    "client_id": "client_id",
    "chunk_size": 945,
    "chunk_index": 2,
    "chunk_id": "abc123...",
    "has_tables": false,
    "has_lists": true
}
```

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

```python
from faiss_vs.src.document_processor import DocumentProcessor

# –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
processor = DocumentProcessor(client_id="test_client")

# –ü—Ä–∏–º–µ—Ä JSON —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
documents_json = {
    "result": [
        {
            "ID": "https://example.com/document.pdf",
            "Description": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è",
            "Parent": "–¢–µ—Ö–Ω–∏–∫–∞",
            "Date": "2024-01-15",
            "GuidDoc": "uuid-123"
        }
    ]
}

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ñ–∞–π–ª
import json
with open('documents.json', 'w', encoding='utf-8') as f:
    json.dump(documents_json, f, ensure_ascii=False)

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã
stats = processor.process_documents_from_json('documents.json')
print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {stats['indexed']} —á–∞–Ω–∫–æ–≤")

# –ü–æ–∏—Å–∫
results = processor.search_documents("—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è", k=3)
for result in results:
    print(f"–ù–∞–π–¥–µ–Ω–æ: {result['source_file']} (score: {result['score']:.3f})")
```

### –†–∞–±–æ—Ç–∞ —Å API

```python
import requests

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
response = requests.post('http://localhost:8000/faiss/create_index', json={
    'client_id': 'your_client_id'
})

if response.json()['status'] == 'ok':
    print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: {response.json()['processed_documents']}")

# –ü–æ–∏—Å–∫
search_response = requests.post('http://localhost:8000/faiss/search', json={
    'client_id': 'your_client_id',
    'query': '–≤–∞—à –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å',
    'k': 5
})

results = search_response.json()
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python:

```python
import logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞

```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
stats = processor.get_index_statistics()
print(f"–°—Ç–∞—Ç—É—Å: {stats['status']}")
print(f"–í–µ–∫—Ç–æ—Ä–æ–≤: {stats['total_vectors']}")
print(f"–ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤: {stats['sources_count']}")
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **–ò–Ω–¥–µ–∫—Å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ `faiss_index/clients/{client_id}/`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å

2. **–ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞**
   - –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–æ–¥–µ–ª—å embeddings
   - –£–ª—É—á—à–∏—Ç–µ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–∞

3. **–ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
   - –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–µ–π –¥–ª—è embeddings
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU –≤–µ—Ä—Å–∏—é sentence-transformers
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å OCR**
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞: `pip install easyocr`
   - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤ `image_processor.py`

2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤**
   - –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ PDF
   - –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –≥–ª–∞–≤–∞–º

3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫**
   - –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (semantic + keyword)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
   - –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - Summarization –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã:

1. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `config.py`
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ JSON –¥–∞–Ω–Ω—ã—Ö

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 2024-01-15*